import{L as r,p as v,g as I,r as u,a as f,b as L,d as c}from"./tui-lib-pagination-a807fd19.js";const i=document.querySelector(".favorite-ingredients-list"),n=document.querySelector(".placeholder-empty-favorite-list");function p(){const s=JSON.parse(localStorage.getItem(r.INGREDIENTS))||[];if(!s.length){i.classList.add("visually-hidden"),n.classList.remove("visually-hidden"),n.closest(".favorite-section").classList.add("is-empty");return}const e=v(s,6,i,c);console.log(e),n.classList.add("visually-hidden"),n.closest(".favorite-section").classList.remove("is-empty"),i.classList.remove("visually-hidden"),i.addEventListener("click",t=>{y(t,e)})}function y(s,e){const t=s.target;t.closest(".remove-from-localstorage-btn")&&h(t,e),t.closest(".learn-more-btn")&&S(t)}async function S(s){const e=s.closest(".favorite-ingredient-item").dataset.id,t=await I(e);u(...t),f(),L(t,r.INGREDIENTS,c)}function h(s,e){const t=s.closest(".favorite-ingredient-item").dataset.id;let o=JSON.parse(localStorage.getItem(r.INGREDIENTS))||[];const d=o.findIndex(a=>a._id===t);if(d!==-1&&(o.splice(d,1),localStorage.setItem(r.INGREDIENTS,JSON.stringify(o))),!o.length)i.classList.add("visually-hidden"),n.classList.remove("visually-hidden"),n.closest(".favorite-section").classList.add("is-empty");else{console.log(e);const a=e.getCurrentPage();console.log("curPage: ",a);const l=e._options.itemsPerPage;console.log("itemsPerPage: ",l),e.setTotalItems(o.length);const g=e._options.totalItems;console.log("totalItems ",g);const m=(a-1)*l;i.innerHTML=c(o.slice(m,m+l)),g%l===0&&(e.reset(o.length),e.movePageTo(a-1)),console.log("products: ",o)}}p();
